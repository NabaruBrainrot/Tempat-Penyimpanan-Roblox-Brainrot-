-- ================= REMOVE GUI LAMA =================
pcall(function()
	game.CoreGui:FindFirstChild("DeliveryTouchGUI"):Destroy()
end)

-- ================= GUI ONLY (BARU) =================
local ScreenGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local Button = Instance.new("TextButton")
local Label = Instance.new("TextLabel")
local UICorner_Frame = Instance.new("UICorner")
local UICorner_Button = Instance.new("UICorner")
local UICorner_Label = Instance.new("UICorner")

ScreenGui.Name = "DeliveryTouchGUI"
ScreenGui.Parent = game.CoreGui
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Frame
Frame.Parent = ScreenGui
Frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
Frame.Position = UDim2.new(0, 20, 0, 100)
Frame.Size = UDim2.new(0, 140, 0, 90)
Frame.Active = true
Frame.Draggable = true
UICorner_Frame.CornerRadius = UDim.new(0, 10)
UICorner_Frame.Parent = Frame

-- Label
Label.Parent = Frame
Label.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
Label.Position = UDim2.new(0, 10, 0, 10)
Label.Size = UDim2.new(0, 120, 0, 25)
Label.Font = Enum.Font.GothamBold
Label.Text = "RadioActiv Farm"
Label.TextColor3 = Color3.fromRGB(255, 255, 255)
Label.TextSize = 14
UICorner_Label.CornerRadius = UDim.new(0, 6)
UICorner_Label.Parent = Label

-- Button
Button.Parent = Frame
Button.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
Button.Position = UDim2.new(0, 10, 0, 45)
Button.Size = UDim2.new(0, 120, 0, 30)
Button.Font = Enum.Font.GothamBold
Button.Text = "▶ Start Farm"
Button.TextColor3 = Color3.fromRGB(255, 255, 255)
Button.TextSize = 12
Button.TextWrapped = true
UICorner_Button.CornerRadius = UDim.new(0, 8)
UICorner_Button.Parent = Button

-- ================= LOGIC TIDAK DIUBAH =================

local Players = game:GetService("Players")
local player = Players.LocalPlayer

local character, humanoidRootPart
local EventFolder = nil

local PullDelay = 0.1
local HeightOffset = 3
local active = false

-- Character handler (aman)
local function setupCharacter(char)
	character = char
	humanoidRootPart = char:WaitForChild("HumanoidRootPart", 10)
end

if player.Character then
	setupCharacter(player.Character)
end
player.CharacterAdded:Connect(setupCharacter)

-- Cari EventParts TANPA BLOKIR GUI
task.spawn(function()
	while not EventFolder do
		EventFolder = workspace:FindFirstChild("EventParts")
		task.wait(1)
	end
end)

-- Model part
local function getModelPart(model)
	if model.PrimaryPart then return model.PrimaryPart end
	for _, v in ipairs(model:GetDescendants()) do
		if v:IsA("BasePart") then
			model.PrimaryPart = v
			return v
		end
	end
end

-- Loop tarik model
task.spawn(function()
	while true do
		if active and humanoidRootPart and EventFolder then
			for _, model in ipairs(EventFolder:GetChildren()) do
				if model:IsA("Model") then
					local part = getModelPart(model)
					if part then
						model:SetPrimaryPartCFrame(
							CFrame.new(
								humanoidRootPart.Position + Vector3.new(0, HeightOffset, 0)
							)
						)
					end
				end
			end
		end
		task.wait(PullDelay)
	end
end)

-- ================= BUTTON LOGIC (SAMA) =================
Button.MouseButton1Click:Connect(function()
	active = not active

	if active then
		Button.Text = "■ Stop Farm"
		Button.BackgroundColor3 = Color3.fromRGB(0, 200, 120)
	else
		Button.Text = "▶ Start Farm"
		Button.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
	end
end)