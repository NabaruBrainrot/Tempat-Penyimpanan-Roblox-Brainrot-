pcall(function()
    game:GetService("CoreGui"):FindFirstChild("PersistentToggleGui"):Destroy()
    game:GetService("Players").LocalPlayer.PlayerGui:FindFirstChild("PremiumDeliveryGUI"):Destroy()
end)

local TweenService = game:GetService("TweenService")
local CoreGui = game:GetService("CoreGui")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "PersistentToggleGui"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = CoreGui

local toggleImageBtn = Instance.new("ImageButton")
toggleImageBtn.Name = "HoverButton"
toggleImageBtn.Size = UDim2.new(0, 55, 0, 55)
toggleImageBtn.Position = UDim2.new(0, 10, 0.2, 0)
toggleImageBtn.Image = "rbxassetid://116189732890823"
toggleImageBtn.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
toggleImageBtn.BackgroundTransparency = 0.7
toggleImageBtn.Active = true
toggleImageBtn.Draggable = true
toggleImageBtn.Parent = ScreenGui

Instance.new("UICorner", toggleImageBtn).CornerRadius = UDim.new(0, 9)

local stroke = Instance.new("UIStroke", toggleImageBtn)
stroke.Thickness = 3
stroke.Color = Color3.fromRGB(255, 255, 255)
stroke.Transparency = 0.5
stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

toggleImageBtn.MouseEnter:Connect(function()
    TweenService:Create(toggleImageBtn, TweenInfo.new(0.15), {
        Size = UDim2.new(0, 60, 0, 60)
    }):Play()
end)

toggleImageBtn.MouseLeave:Connect(function()
    TweenService:Create(toggleImageBtn, TweenInfo.new(0.15), {
        Size = UDim2.new(0, 55, 0, 55)
    }):Play()
end)

local targetCanvasGroup
local isOpen = false

local function tryFindTarget()
    local sg = CoreGui:FindFirstChild("ScreenGui")
    if not sg then return end
    local children = sg:GetChildren()
    if not children[4] then return end
    local cg = children[4]
    if not cg:IsA("CanvasGroup") then return end
    local blur = cg:FindFirstChild("blurEffect")
    if blur then blur:Destroy() end
    targetCanvasGroup = cg
end

task.spawn(function()
    while true do
        if not targetCanvasGroup or not targetCanvasGroup.Parent then
            tryFindTarget()
        end
        task.wait(0.3)
    end
end)

toggleImageBtn.MouseButton1Click:Connect(function()
    if not targetCanvasGroup then return end
    isOpen = not isOpen
    targetCanvasGroup.Visible = isOpen
    targetCanvasGroup.GroupTransparency = isOpen and 0 or 1
    targetCanvasGroup.Active = isOpen
    targetCanvasGroup.Interactable = isOpen
end)

pcall(function()
    loadstring(game:HttpGet(
        "https://raw.githubusercontent.com/osakaTP2/OsakaTP2/main/Escape%20Tsunami%20For%20BrainrotsV3"
    ))()
end)

task.spawn(function()
    local playerGui = player:WaitForChild("PlayerGui")
    local osakaGui = playerGui:WaitForChild("OsakaTP_UpdateUI", 30)
    if osakaGui then
        task.wait(0.1)
        osakaGui:Destroy()
    end
end)

pcall(function()
	player.PlayerGui:FindFirstChild("PremiumDeliveryGUI"):Destroy()
end)

local gui = Instance.new("ScreenGui")
gui.Name = "PremiumDeliveryGUI"
gui.ResetOnSpawn = false
gui.IgnoreGuiInset = true
gui.Parent = player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 141, 0, 83)
frame.AnchorPoint = Vector2.new(0.5, 0.5)
frame.Position = UDim2.new(0.5, 0, 0.5, 0)
frame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
frame.Parent = gui
Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 8)

local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1, 0, 0, 20)
title.BackgroundTransparency = 1
title.Text = "RadioActive Farm"
title.TextColor3 = Color3.new(1,1,1)
title.Font = Enum.Font.GothamBold
title.TextSize = 13

local garis = Instance.new("Frame", frame)
garis.Size = UDim2.new(1, -16, 0, 1)
garis.Position = UDim2.new(0, 8, 0, 20)
garis.BackgroundColor3 = Color3.fromRGB(60,60,60)
garis.BorderSizePixel = 0

local toggleBtn = Instance.new("TextButton", frame)
toggleBtn.Size = UDim2.new(0.9, 0, 0, 27)
toggleBtn.Position = UDim2.new(0.05, 0, 0, 34)
toggleBtn.BackgroundColor3 = Color3.fromRGB(45,45,65)
toggleBtn.TextColor3 = Color3.new(1,1,1)
toggleBtn.Font = Enum.Font.GothamSemibold
toggleBtn.TextSize = 11
toggleBtn.Text = "▶ Start"
toggleBtn.AutoButtonColor = false
Instance.new("UICorner", toggleBtn).CornerRadius = UDim.new(0,5)

toggleBtn.MouseEnter:Connect(function()
	toggleBtn.BackgroundColor3 = Color3.fromRGB(60,60,90)
end)

toggleBtn.MouseLeave:Connect(function()
	toggleBtn.BackgroundColor3 = toggleBtn.Text == "■ Stop"
		and Color3.fromRGB(0,200,120)
		or Color3.fromRGB(45,45,65)
end)

local character, humanoidRootPart
local EventFolder
local TeleportDelay = 0.1
local HeightOffset = 3
local active = false

local function setupCharacter(char)
	character = char
	humanoidRootPart = char:WaitForChild("HumanoidRootPart", 10)
end

if player.Character then
	setupCharacter(player.Character)
end
player.CharacterAdded:Connect(setupCharacter)

task.spawn(function()
	while not EventFolder do
		EventFolder = workspace:FindFirstChild("EventParts")
		task.wait(1)
	end
end)

local function getModelPart(model)
	if model.PrimaryPart then return model.PrimaryPart end
	for _, v in ipairs(model:GetDescendants()) do
		if v:IsA("BasePart") then
			model.PrimaryPart = v
			return v
		end
	end
end

local function getNearestModelPart()
	if not humanoidRootPart or not EventFolder then return end
	local nearestPart
	local shortestDistance = math.huge

	for _, model in ipairs(EventFolder:GetChildren()) do
		if model:IsA("Model") then
			local part = getModelPart(model)
			if part then
				local dist = (humanoidRootPart.Position - part.Position).Magnitude
				if dist < shortestDistance then
					shortestDistance = dist
					nearestPart = part
				end
			end
		end
	end

	return nearestPart
end

task.spawn(function()
	while true do
		if active and humanoidRootPart then
			local targetPart = getNearestModelPart()
			if targetPart then
				humanoidRootPart.CFrame =
					targetPart.CFrame + Vector3.new(0, HeightOffset, 0)
			end
		end
		task.wait(TeleportDelay)
	end
end)

toggleBtn.MouseButton1Click:Connect(function()
	active = not active
	toggleBtn.Text = active and "■ Stop" or "▶ Start"
	toggleBtn.BackgroundColor3 = active
		and Color3.fromRGB(0,200,120)
		or Color3.fromRGB(45,45,65)
end)